# --- disable zsh sessions ---
# Disable macOS zsh session saving
unset -f zshexit_save_session 2>/dev/null
add-zsh-hook -d zshexit zshexit_save_session 2>/dev/null

# --- XDG base dirs ---
export XDG_CONFIG_HOME="$HOME/.config"
export XDG_CACHE_HOME="$HOME/.cache"
export XDG_DATA_HOME="$HOME/.local/share"

# --- Zsh history in XDG ---
export HISTFILE="$XDG_CACHE_HOME/zsh/history"
mkdir -p "${HISTFILE:h}"

# --- Zcompdump in XDG ---
export ZSH_COMPDUMP="$ZSH_CACHE_DIR/zcompdump-$HOST"
mkdir -p "${ZSH_COMPDUMP:h}"

# --- less history in XDG ---
export LESSHISTFILE="$XDG_CACHE_HOME/less/history"
mkdir -p "${LESSHISTFILE:h}"

# --- Python startup in XDG ---
export PYTHONSTARTUP="$XDG_CONFIG_HOME/python/startup.py"
mkdir -p "${PYTHONSTARTUP:h}"

# --- iPython in XDG ---
export IPYTHONDIR="$XDG_CONFIG_HOME/ipython"
mkdir -p "$IPYTHONDIR"

# --- Dagster in XDG ---
export DAGSTER_HOME="$XDG_DATA_HOME/dagster"
mkdir -p "$DAGSTER_HOME"

# --- Provide vim cache path ---
mkdir -p "$XDG_CACHE_HOME/vim"

# --- Provide marimo config path ---
mkdir -p "$XDG_CONFIG_HOME/marimo"

eval "$(starship init zsh)"

